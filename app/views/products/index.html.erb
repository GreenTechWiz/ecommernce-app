<h1><%= @category ? "Showing results for: '#{@category.name}'" : "All products" %></h1>

<%= form_tag("/products", method: :get) do %>
  <div class="row">
    <div class="col-sm-3">
      <%= label_tag(:category_id, "Select a Product Category to search by:") %>
    </div>
    <div class="col-sm-6">
      <div class="form-group">
      <%= select_tag(:category_id, options_from_collection_for_select(@categories, :id, :name, @category ? @category.id : nil), prompt: "Select Product Category", class: "form-control")%>
      </div>
    </div>
    <div class="col-sm-3">
      <%= submit_tag("Search", class: "btn btn-primary") %>
    </div>
  </div>
<% end %>

<div class="row">
  <% @products.each do |product| %>
    <div class="card col-md-4">
      <div class="card" style="margin: 5px 5px">
        <%= image_tag(product.image_tag, class: "card-img-top") %>
        <div class="card-body">
          <h5 class="card-title"><%= product.name %></h5>
          <p class="card-text"><%= product.price_format %></p>
          <%= link_to("View Product", "/products/#{product.id}", class: "btn btn-primary") %>
        </div>  
      </div>
    </div>
  <% end %>
</div>

